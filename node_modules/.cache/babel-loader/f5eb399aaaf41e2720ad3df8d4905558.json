{"ast":null,"code":"/**\n * Copyright Schrodinger, LLC\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule reducers\n */\n'use strict';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _scrollAnchor3 = require('./scrollAnchor');\n\nvar ActionTypes = _interopRequireWildcard(require('./ActionTypes'));\n\nvar _IntegerBufferSet = _interopRequireDefault(require('./IntegerBufferSet'));\n\nvar _PrefixIntervalTree = _interopRequireDefault(require('./PrefixIntervalTree'));\n\nvar _columnStateHelper = _interopRequireDefault(require('./columnStateHelper'));\n\nvar _computeRenderedRows = _interopRequireDefault(require('./computeRenderedRows'));\n\nvar _convertColumnElementsToData = _interopRequireDefault(require('./convertColumnElementsToData'));\n\nvar _pick = _interopRequireDefault(require('lodash/pick'));\n\nvar _shallowEqual = _interopRequireDefault(require('./shallowEqual'));\n\nvar _Scrollbar = _interopRequireDefault(require('./Scrollbar'));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n/**\n * Returns the default initial state for the redux store.\n * This must be a brand new, independent object for each table instance\n * or issues may occur due to multiple tables sharing data.\n *\n * @return {!Object}\n */\n\n\nfunction getInitialState() {\n  return {\n    /*\n     * Input state set from props\n     */\n    columnProps: [],\n    columnGroupProps: [],\n    elementTemplates: {\n      cell: [],\n      footer: [],\n      groupHeader: [],\n      header: []\n    },\n    elementHeights: {\n      footerHeight: 0,\n      groupHeaderHeight: 0,\n      headerHeight: 0\n    },\n    rowSettings: {\n      bufferRowCount: undefined,\n      rowAttributesGetter: undefined,\n      rowHeight: 0,\n      rowHeightGetter: function rowHeightGetter() {\n        return 0;\n      },\n      rowsCount: 0,\n      subRowHeight: 0,\n      subRowHeightGetter: function subRowHeightGetter() {\n        return 0;\n      }\n    },\n    scrollFlags: {\n      overflowX: 'auto',\n      overflowY: 'auto',\n      showScrollbarX: true,\n      showScrollbarY: true\n    },\n    tableSize: {\n      height: undefined,\n      maxHeight: 0,\n      ownerHeight: undefined,\n      useMaxHeight: false,\n      width: 0\n    },\n\n    /*\n     * Output state passed as props to the the rendered FixedDataTable\n     * NOTE (jordan) rows may contain undefineds if we don't need all the buffer positions\n     */\n    columnReorderingData: {},\n    columnResizingData: {},\n    firstRowIndex: 0,\n    firstRowOffset: 0,\n    isColumnReordering: false,\n    isColumnResizing: false,\n    maxScrollX: 0,\n    maxScrollY: 0,\n    rowOffsets: {},\n    rows: [],\n    // rowsToRender\n    scrollContentHeight: 0,\n    scrollX: 0,\n    scrollbarXHeight: _Scrollbar[\"default\"].SIZE,\n    scrollY: 0,\n    scrollbarYWidth: _Scrollbar[\"default\"].SIZE,\n    scrolling: false,\n\n    /*\n     * Internal state only used by this file\n     * NOTE (jordan) internal state is altered in place\n     * so don't trust it for redux history or immutability checks\n     * TODO (jordan) investigate if we want to move this to local or scoped state\n     */\n    rowBufferSet: new _IntegerBufferSet[\"default\"](),\n    storedHeights: [],\n    rowOffsetIntervalTree: null // PrefixIntervalTree\n\n  };\n}\n\nfunction reducers() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getInitialState();\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.INITIALIZE:\n      {\n        var props = action.props;\n        var newState = setStateFromProps(state, props);\n        newState = initializeRowHeightsAndOffsets(newState);\n        var scrollAnchor = (0, _scrollAnchor3.getScrollAnchor)(newState, props);\n        newState = (0, _computeRenderedRows[\"default\"])(newState, scrollAnchor);\n        return _columnStateHelper[\"default\"].initialize(newState, props, {});\n      }\n\n    case ActionTypes.PROP_CHANGE:\n      {\n        var newProps = action.newProps,\n            oldProps = action.oldProps;\n\n        var _newState = setStateFromProps(state, newProps);\n\n        if (oldProps.rowsCount !== newProps.rowsCount || oldProps.rowHeight !== newProps.rowHeight || oldProps.subRowHeight !== newProps.subRowHeight) {\n          _newState = initializeRowHeightsAndOffsets(_newState);\n        }\n\n        if (oldProps.rowsCount !== newProps.rowsCount) {\n          // NOTE (jordan) bad practice to modify state directly, but okay since\n          // we know setStateFromProps clones state internally\n          _newState.rowBufferSet = new _IntegerBufferSet[\"default\"]();\n        }\n\n        var _scrollAnchor = (0, _scrollAnchor3.getScrollAnchor)(_newState, newProps, oldProps); // If anything has changed in state, update our rendered rows\n\n\n        if (!(0, _shallowEqual[\"default\"])(state, _newState) || _scrollAnchor.changed) {\n          _newState = (0, _computeRenderedRows[\"default\"])(_newState, _scrollAnchor);\n        }\n\n        _newState = _columnStateHelper[\"default\"].initialize(_newState, newProps, oldProps); // if scroll values have changed, then we're scrolling!\n\n        if (_newState.scrollX !== state.scrollX || _newState.scrollY !== state.scrollY) {\n          _newState.scrolling = _newState.scrolling || true;\n        } // TODO REDUX_MIGRATION solve w/ evil-diff\n        // TODO (jordan) check if relevant props unchanged and\n        // children column widths and flex widths are unchanged\n        // alternatively shallow diff and reconcile props\n\n\n        return _newState;\n      }\n\n    case ActionTypes.SCROLL_END:\n      {\n        var _newState2 = _extends({}, state, {\n          scrolling: false\n        });\n\n        var previousScrollAnchor = {\n          firstIndex: state.firstRowIndex,\n          firstOffset: state.firstRowOffset,\n          lastIndex: state.lastIndex\n        };\n        return (0, _computeRenderedRows[\"default\"])(_newState2, previousScrollAnchor);\n      }\n\n    case ActionTypes.SCROLL_TO_Y:\n      {\n        var scrollY = action.scrollY;\n\n        var _newState3 = _extends({}, state, {\n          scrolling: true\n        });\n\n        var _scrollAnchor2 = (0, _scrollAnchor3.scrollTo)(_newState3, scrollY);\n\n        return (0, _computeRenderedRows[\"default\"])(_newState3, _scrollAnchor2);\n      }\n\n    case ActionTypes.COLUMN_RESIZE:\n      {\n        var resizeData = action.resizeData;\n        return _columnStateHelper[\"default\"].resizeColumn(state, resizeData);\n      }\n\n    case ActionTypes.COLUMN_REORDER_START:\n      {\n        var reorderData = action.reorderData;\n        return _columnStateHelper[\"default\"].reorderColumn(state, reorderData);\n      }\n\n    case ActionTypes.COLUMN_REORDER_END:\n      {\n        return _extends({}, state, {\n          isColumnReordering: false,\n          columnReorderingData: {}\n        });\n      }\n\n    case ActionTypes.COLUMN_REORDER_MOVE:\n      {\n        var deltaX = action.deltaX;\n        return _columnStateHelper[\"default\"].reorderColumnMove(state, deltaX);\n      }\n\n    case ActionTypes.SCROLL_TO_X:\n      {\n        var scrollX = action.scrollX;\n        return _extends({}, state, {\n          scrolling: true,\n          scrollX: scrollX\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n/**\n * Initialize row heights (storedHeights) & offsets based on the default rowHeight\n *\n * @param {!Object} state\n * @private\n */\n\n\nfunction initializeRowHeightsAndOffsets(state) {\n  var _state$rowSettings = state.rowSettings,\n      rowHeight = _state$rowSettings.rowHeight,\n      rowsCount = _state$rowSettings.rowsCount,\n      subRowHeight = _state$rowSettings.subRowHeight;\n  var defaultFullRowHeight = rowHeight + subRowHeight;\n\n  var rowOffsetIntervalTree = _PrefixIntervalTree[\"default\"].uniform(rowsCount, defaultFullRowHeight);\n\n  var scrollContentHeight = rowsCount * defaultFullRowHeight;\n  var storedHeights = new Array(rowsCount);\n\n  for (var idx = 0; idx < rowsCount; idx++) {\n    storedHeights[idx] = defaultFullRowHeight;\n  }\n\n  return _extends({}, state, {\n    rowOffsetIntervalTree: rowOffsetIntervalTree,\n    scrollContentHeight: scrollContentHeight,\n    storedHeights: storedHeights\n  });\n}\n/**\n * @param {!Object} state\n * @param {!Object} props\n * @return {!Object}\n * @private\n */\n\n\nfunction setStateFromProps(state, props) {\n  var _convertColumnElement = (0, _convertColumnElementsToData[\"default\"])(props.children),\n      columnGroupProps = _convertColumnElement.columnGroupProps,\n      columnProps = _convertColumnElement.columnProps,\n      elementTemplates = _convertColumnElement.elementTemplates,\n      useGroupHeader = _convertColumnElement.useGroupHeader;\n\n  var newState = _extends({}, state, {\n    columnGroupProps: columnGroupProps,\n    columnProps: columnProps,\n    elementTemplates: elementTemplates\n  });\n\n  newState.elementHeights = _extends({}, newState.elementHeights, (0, _pick[\"default\"])(props, ['cellGroupWrapperHeight', 'footerHeight', 'groupHeaderHeight', 'headerHeight']));\n\n  if (!useGroupHeader) {\n    newState.elementHeights.groupHeaderHeight = 0;\n  }\n\n  newState.rowSettings = _extends({}, newState.rowSettings, (0, _pick[\"default\"])(props, ['bufferRowCount', 'rowHeight', 'rowsCount', 'subRowHeight']));\n  var _newState$rowSettings = newState.rowSettings,\n      rowHeight = _newState$rowSettings.rowHeight,\n      subRowHeight = _newState$rowSettings.subRowHeight;\n\n  newState.rowSettings.rowHeightGetter = props.rowHeightGetter || function () {\n    return rowHeight;\n  };\n\n  newState.rowSettings.subRowHeightGetter = props.subRowHeightGetter || function () {\n    return subRowHeight || 0;\n  };\n\n  newState.rowSettings.rowAttributesGetter = props.rowAttributesGetter;\n  newState.scrollFlags = _extends({}, newState.scrollFlags, (0, _pick[\"default\"])(props, ['overflowX', 'overflowY', 'showScrollbarX', 'showScrollbarY']));\n  newState.tableSize = _extends({}, newState.tableSize, (0, _pick[\"default\"])(props, ['height', 'maxHeight', 'ownerHeight', 'width']));\n  newState.tableSize.useMaxHeight = newState.tableSize.height === undefined;\n  newState.scrollbarXHeight = props.scrollbarXHeight;\n  newState.scrollbarYWidth = props.scrollbarYWidth;\n  return newState;\n}\n\nvar _default = reducers;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/discovery/Documents/secure-frontend/node_modules/fixed-data-table-2/internal/reducers.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","_scrollAnchor3","require","ActionTypes","_interopRequireWildcard","_IntegerBufferSet","_interopRequireDefault","_PrefixIntervalTree","_columnStateHelper","_computeRenderedRows","_convertColumnElementsToData","_pick","_shallowEqual","_Scrollbar","__esModule","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_extends","assign","target","i","arguments","length","source","apply","getInitialState","columnProps","columnGroupProps","elementTemplates","cell","footer","groupHeader","header","elementHeights","footerHeight","groupHeaderHeight","headerHeight","rowSettings","bufferRowCount","undefined","rowAttributesGetter","rowHeight","rowHeightGetter","rowsCount","subRowHeight","subRowHeightGetter","scrollFlags","overflowX","overflowY","showScrollbarX","showScrollbarY","tableSize","height","maxHeight","ownerHeight","useMaxHeight","width","columnReorderingData","columnResizingData","firstRowIndex","firstRowOffset","isColumnReordering","isColumnResizing","maxScrollX","maxScrollY","rowOffsets","rows","scrollContentHeight","scrollX","scrollbarXHeight","SIZE","scrollY","scrollbarYWidth","scrolling","rowBufferSet","storedHeights","rowOffsetIntervalTree","reducers","state","action","type","INITIALIZE","props","newState","setStateFromProps","initializeRowHeightsAndOffsets","scrollAnchor","getScrollAnchor","initialize","PROP_CHANGE","newProps","oldProps","_newState","_scrollAnchor","changed","SCROLL_END","_newState2","previousScrollAnchor","firstIndex","firstOffset","lastIndex","SCROLL_TO_Y","_newState3","_scrollAnchor2","scrollTo","COLUMN_RESIZE","resizeData","resizeColumn","COLUMN_REORDER_START","reorderData","reorderColumn","COLUMN_REORDER_END","COLUMN_REORDER_MOVE","deltaX","reorderColumnMove","SCROLL_TO_X","_state$rowSettings","defaultFullRowHeight","uniform","Array","idx","_convertColumnElement","children","useGroupHeader","_newState$rowSettings","_default"],"mappings":"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","sourcesContent":["/**\n * Copyright Schrodinger, LLC\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule reducers\n */\n'use strict';\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _scrollAnchor3 = require('./scrollAnchor');\n\nvar ActionTypes = _interopRequireWildcard(require('./ActionTypes'));\n\nvar _IntegerBufferSet = _interopRequireDefault(require('./IntegerBufferSet'));\n\nvar _PrefixIntervalTree = _interopRequireDefault(require('./PrefixIntervalTree'));\n\nvar _columnStateHelper = _interopRequireDefault(require('./columnStateHelper'));\n\nvar _computeRenderedRows = _interopRequireDefault(require('./computeRenderedRows'));\n\nvar _convertColumnElementsToData = _interopRequireDefault(require('./convertColumnElementsToData'));\n\nvar _pick = _interopRequireDefault(require('lodash/pick'));\n\nvar _shallowEqual = _interopRequireDefault(require('./shallowEqual'));\n\nvar _Scrollbar = _interopRequireDefault(require('./Scrollbar'));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n/**\n * Returns the default initial state for the redux store.\n * This must be a brand new, independent object for each table instance\n * or issues may occur due to multiple tables sharing data.\n *\n * @return {!Object}\n */\nfunction getInitialState() {\n  return {\n    /*\n     * Input state set from props\n     */\n    columnProps: [],\n    columnGroupProps: [],\n    elementTemplates: {\n      cell: [],\n      footer: [],\n      groupHeader: [],\n      header: []\n    },\n    elementHeights: {\n      footerHeight: 0,\n      groupHeaderHeight: 0,\n      headerHeight: 0\n    },\n    rowSettings: {\n      bufferRowCount: undefined,\n      rowAttributesGetter: undefined,\n      rowHeight: 0,\n      rowHeightGetter: function rowHeightGetter() {\n        return 0;\n      },\n      rowsCount: 0,\n      subRowHeight: 0,\n      subRowHeightGetter: function subRowHeightGetter() {\n        return 0;\n      }\n    },\n    scrollFlags: {\n      overflowX: 'auto',\n      overflowY: 'auto',\n      showScrollbarX: true,\n      showScrollbarY: true\n    },\n    tableSize: {\n      height: undefined,\n      maxHeight: 0,\n      ownerHeight: undefined,\n      useMaxHeight: false,\n      width: 0\n    },\n\n    /*\n     * Output state passed as props to the the rendered FixedDataTable\n     * NOTE (jordan) rows may contain undefineds if we don't need all the buffer positions\n     */\n    columnReorderingData: {},\n    columnResizingData: {},\n    firstRowIndex: 0,\n    firstRowOffset: 0,\n    isColumnReordering: false,\n    isColumnResizing: false,\n    maxScrollX: 0,\n    maxScrollY: 0,\n    rowOffsets: {},\n    rows: [],\n    // rowsToRender\n    scrollContentHeight: 0,\n    scrollX: 0,\n    scrollbarXHeight: _Scrollbar[\"default\"].SIZE,\n    scrollY: 0,\n    scrollbarYWidth: _Scrollbar[\"default\"].SIZE,\n    scrolling: false,\n\n    /*\n     * Internal state only used by this file\n     * NOTE (jordan) internal state is altered in place\n     * so don't trust it for redux history or immutability checks\n     * TODO (jordan) investigate if we want to move this to local or scoped state\n     */\n    rowBufferSet: new _IntegerBufferSet[\"default\"](),\n    storedHeights: [],\n    rowOffsetIntervalTree: null // PrefixIntervalTree\n\n  };\n}\n\nfunction reducers() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getInitialState();\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.INITIALIZE:\n      {\n        var props = action.props;\n        var newState = setStateFromProps(state, props);\n        newState = initializeRowHeightsAndOffsets(newState);\n        var scrollAnchor = (0, _scrollAnchor3.getScrollAnchor)(newState, props);\n        newState = (0, _computeRenderedRows[\"default\"])(newState, scrollAnchor);\n        return _columnStateHelper[\"default\"].initialize(newState, props, {});\n      }\n\n    case ActionTypes.PROP_CHANGE:\n      {\n        var newProps = action.newProps,\n            oldProps = action.oldProps;\n\n        var _newState = setStateFromProps(state, newProps);\n\n        if (oldProps.rowsCount !== newProps.rowsCount || oldProps.rowHeight !== newProps.rowHeight || oldProps.subRowHeight !== newProps.subRowHeight) {\n          _newState = initializeRowHeightsAndOffsets(_newState);\n        }\n\n        if (oldProps.rowsCount !== newProps.rowsCount) {\n          // NOTE (jordan) bad practice to modify state directly, but okay since\n          // we know setStateFromProps clones state internally\n          _newState.rowBufferSet = new _IntegerBufferSet[\"default\"]();\n        }\n\n        var _scrollAnchor = (0, _scrollAnchor3.getScrollAnchor)(_newState, newProps, oldProps); // If anything has changed in state, update our rendered rows\n\n\n        if (!(0, _shallowEqual[\"default\"])(state, _newState) || _scrollAnchor.changed) {\n          _newState = (0, _computeRenderedRows[\"default\"])(_newState, _scrollAnchor);\n        }\n\n        _newState = _columnStateHelper[\"default\"].initialize(_newState, newProps, oldProps); // if scroll values have changed, then we're scrolling!\n\n        if (_newState.scrollX !== state.scrollX || _newState.scrollY !== state.scrollY) {\n          _newState.scrolling = _newState.scrolling || true;\n        } // TODO REDUX_MIGRATION solve w/ evil-diff\n        // TODO (jordan) check if relevant props unchanged and\n        // children column widths and flex widths are unchanged\n        // alternatively shallow diff and reconcile props\n\n\n        return _newState;\n      }\n\n    case ActionTypes.SCROLL_END:\n      {\n        var _newState2 = _extends({}, state, {\n          scrolling: false\n        });\n\n        var previousScrollAnchor = {\n          firstIndex: state.firstRowIndex,\n          firstOffset: state.firstRowOffset,\n          lastIndex: state.lastIndex\n        };\n        return (0, _computeRenderedRows[\"default\"])(_newState2, previousScrollAnchor);\n      }\n\n    case ActionTypes.SCROLL_TO_Y:\n      {\n        var scrollY = action.scrollY;\n\n        var _newState3 = _extends({}, state, {\n          scrolling: true\n        });\n\n        var _scrollAnchor2 = (0, _scrollAnchor3.scrollTo)(_newState3, scrollY);\n\n        return (0, _computeRenderedRows[\"default\"])(_newState3, _scrollAnchor2);\n      }\n\n    case ActionTypes.COLUMN_RESIZE:\n      {\n        var resizeData = action.resizeData;\n        return _columnStateHelper[\"default\"].resizeColumn(state, resizeData);\n      }\n\n    case ActionTypes.COLUMN_REORDER_START:\n      {\n        var reorderData = action.reorderData;\n        return _columnStateHelper[\"default\"].reorderColumn(state, reorderData);\n      }\n\n    case ActionTypes.COLUMN_REORDER_END:\n      {\n        return _extends({}, state, {\n          isColumnReordering: false,\n          columnReorderingData: {}\n        });\n      }\n\n    case ActionTypes.COLUMN_REORDER_MOVE:\n      {\n        var deltaX = action.deltaX;\n        return _columnStateHelper[\"default\"].reorderColumnMove(state, deltaX);\n      }\n\n    case ActionTypes.SCROLL_TO_X:\n      {\n        var scrollX = action.scrollX;\n        return _extends({}, state, {\n          scrolling: true,\n          scrollX: scrollX\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}\n/**\n * Initialize row heights (storedHeights) & offsets based on the default rowHeight\n *\n * @param {!Object} state\n * @private\n */\n\n\nfunction initializeRowHeightsAndOffsets(state) {\n  var _state$rowSettings = state.rowSettings,\n      rowHeight = _state$rowSettings.rowHeight,\n      rowsCount = _state$rowSettings.rowsCount,\n      subRowHeight = _state$rowSettings.subRowHeight;\n  var defaultFullRowHeight = rowHeight + subRowHeight;\n\n  var rowOffsetIntervalTree = _PrefixIntervalTree[\"default\"].uniform(rowsCount, defaultFullRowHeight);\n\n  var scrollContentHeight = rowsCount * defaultFullRowHeight;\n  var storedHeights = new Array(rowsCount);\n\n  for (var idx = 0; idx < rowsCount; idx++) {\n    storedHeights[idx] = defaultFullRowHeight;\n  }\n\n  return _extends({}, state, {\n    rowOffsetIntervalTree: rowOffsetIntervalTree,\n    scrollContentHeight: scrollContentHeight,\n    storedHeights: storedHeights\n  });\n}\n/**\n * @param {!Object} state\n * @param {!Object} props\n * @return {!Object}\n * @private\n */\n\n\nfunction setStateFromProps(state, props) {\n  var _convertColumnElement = (0, _convertColumnElementsToData[\"default\"])(props.children),\n      columnGroupProps = _convertColumnElement.columnGroupProps,\n      columnProps = _convertColumnElement.columnProps,\n      elementTemplates = _convertColumnElement.elementTemplates,\n      useGroupHeader = _convertColumnElement.useGroupHeader;\n\n  var newState = _extends({}, state, {\n    columnGroupProps: columnGroupProps,\n    columnProps: columnProps,\n    elementTemplates: elementTemplates\n  });\n\n  newState.elementHeights = _extends({}, newState.elementHeights, (0, _pick[\"default\"])(props, ['cellGroupWrapperHeight', 'footerHeight', 'groupHeaderHeight', 'headerHeight']));\n\n  if (!useGroupHeader) {\n    newState.elementHeights.groupHeaderHeight = 0;\n  }\n\n  newState.rowSettings = _extends({}, newState.rowSettings, (0, _pick[\"default\"])(props, ['bufferRowCount', 'rowHeight', 'rowsCount', 'subRowHeight']));\n  var _newState$rowSettings = newState.rowSettings,\n      rowHeight = _newState$rowSettings.rowHeight,\n      subRowHeight = _newState$rowSettings.subRowHeight;\n\n  newState.rowSettings.rowHeightGetter = props.rowHeightGetter || function () {\n    return rowHeight;\n  };\n\n  newState.rowSettings.subRowHeightGetter = props.subRowHeightGetter || function () {\n    return subRowHeight || 0;\n  };\n\n  newState.rowSettings.rowAttributesGetter = props.rowAttributesGetter;\n  newState.scrollFlags = _extends({}, newState.scrollFlags, (0, _pick[\"default\"])(props, ['overflowX', 'overflowY', 'showScrollbarX', 'showScrollbarY']));\n  newState.tableSize = _extends({}, newState.tableSize, (0, _pick[\"default\"])(props, ['height', 'maxHeight', 'ownerHeight', 'width']));\n  newState.tableSize.useMaxHeight = newState.tableSize.height === undefined;\n  newState.scrollbarXHeight = props.scrollbarXHeight;\n  newState.scrollbarYWidth = props.scrollbarYWidth;\n  return newState;\n}\n\nvar _default = reducers;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}